<%#
 Copyright 2013-2017 the original author or authors from the JHipster project.

 This file is part of the JHipster project, see https://jhipster.github.io/
 for more information.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-%>
<md-toolbar color="primary" class="mat-elevation-z6" [ngSwitch]="isAuthenticated()">
    <div class="jh-logo-container float-left">
        <a class="navbar-brand logo float-left" routerLink="/">
            <span class="logo-img"></span>
            <span jhiTranslate="global.title" class="navbar-title"><%= capitalizedBaseName %></span> <span class="navbar-version">{{version}}</span>
        </a>
    </div>
    <span class="nav-spacer"></span>
    <button md-icon-button routerLink="/" mdTooltip="{{'global.menu.home' | translate}}"><md-icon>home</md-icon></button>


    <!-- jhipster-needle-add-element-to-menu - JHipster will add new menu items here -->
    <button *ngSwitchCase="true" md-icon-button [mdMenuTriggerFor]="entitiesMenu" mdTooltip="{{'global.menu.entities.main' | translate}}">
      <md-icon>list</md-icon>
    </button>
    <md-menu id="entity-menu" #entitiesMenu="mdMenu">
        <!-- jhipster-needle-add-entity-to-menu - JHipster will add entities to the menu here -->
    </md-menu>

    <button *<%=jhiPrefix%>HasAnyAuthority="'ROLE_ADMIN'" md-icon-button [mdMenuTriggerFor]="adminMenu" mdTooltip="{{'global.menu.admin.main' | translate}}">
      <md-icon>business_center</md-icon>
    </button>
    <md-menu id="admin-menu" #adminMenu="mdMenu">
        <%_ if (applicationType === 'gateway') { _%>
        <button md-menu-item routerLink="gateway">
            <md-icon>subway</md-icon>
            <span jhiTranslate="global.menu.admin.gateway">Gateway</span>
        </button>
        <%_ } _%>
        <button md-menu-item routerLink="user-management">
            <md-icon>supervisor_account</md-icon>
            <span hiTranslate="global.menu.admin.userManagement">User management</span>
        </button>
        <%_ if (websocket === 'spring-websocket') { _%>
        <button md-menu-item routerLink="gateway">
            <md-icon>remove_red_eye</md-icon>
            <span jhiTranslate="global.menu.admin.tracker">User tracker</span>
        </button>
        <%_ } _%>
        <button md-menu-item routerLink="jhi-metrics">
            <md-icon>network_check</md-icon>
            <span jhiTranslate="global.menu.admin.metrics">Metrics</span>
        </button>
        <button md-menu-item routerLink="jhi-health">
            <md-icon>favorite</md-icon>
            <span jhiTranslate="global.menu.admin.health">Health</span>
        </button>
        <button md-menu-item routerLink="jhi-configuration">
            <md-icon >settings</md-icon>
            <span jhiTranslate="global.menu.admin.configuration">Configuration</span>
        </button>
        <%_ if (devDatabaseType !== 'cassandra') { _%>
        <button md-menu-item routerLink="audits">
            <md-icon>add_alert</md-icon>
            <span jhiTranslate="global.menu.admin.audits">Audits</span>
        </button>
        <%_ } _%>
        <button md-menu-item routerLink="logs">
            <md-icon>format_list_bulleted</md-icon>
            <span jhiTranslate="global.menu.admin.logs">Logs</span>
        </button>
        <button *ngIf="swaggerEnabled" md-menu-item routerLink="docs">
            <md-icon>library_books</md-icon>
            <span jhiTranslate="global.menu.admin.apidocs">API</span>
        </button>
        <!-- jhipster-needle-add-element-to-admin-menu - JHipster will add entities to the admin menu here -->
        <%_ if (devDatabaseType === 'h2Disk' || devDatabaseType === 'h2Memory') { _%>
        <button *ngIf="!inProduction" md-menu-item routerLink="./h2-console">
            <md-icon>storage</md-icon>
            <span jhiTranslate="global.menu.admin.database">Database</span>
        </button>
        <%_ } _%>
    </md-menu>

    <%_ if (enableTranslation) { _%>
    <button *ngIf="languages && languages.length > 1" [ngSwitch]="isAuthenticated()" md-icon-button [mdMenuTriggerFor]="languagesMenu" mdTooltip="{{'global.menu.language' | translate}}">
      <md-icon>flag</md-icon>
    </button>
    <md-menu id="languages-menu" #languagesMenu="mdMenu">
        <button md-menu-item *ngFor="let language of languages" (click)="changeLanguage(language)">
            <span>{{language | findLanguageFromKey}}</span>
        </button>
    </md-menu>
    <%_ } _%>

    <button md-icon-button [mdMenuTriggerFor]="accountMenu" mdTooltip="{{'global.menu.account.main' | translate}}">
      <md-icon *ngIf="!getImageUrl()">account_circle</md-icon>
      <span *ngIf="getImageUrl()">
          <img [src]="getImageUrl()" class="profile-image img-circle" alt="Avatar">
      </span>
    </button>
    <md-menu #accountMenu="mdMenu">
        <button *ngSwitchCase="true" md-menu-item routerLink="settings">
            <md-icon>build</md-icon>
            <span jhiTranslate="global.menu.account.settings">Settings</span>
        </button>
        <button *ngSwitchCase="true" md-menu-item routerLink="password">
            <md-icon>vpn_key</md-icon>
            <span jhiTranslate="global.menu.account.password">Password</span>
        </button>
        <%_ if (authenticationType === 'session') { _%>
        <button *ngSwitchCase="true" md-menu-item routerLink="sessions">
            <md-icon>cloud_queue</md-icon>
            <span jhiTranslate="gglobal.menu.account.sessions">Sessions</span>
        </button>
        <%_ } _%>
        <button *ngSwitchCase="true" md-menu-item (click)="logout()" id="logout">
            <md-icon >eject</md-icon>
            <span jhiTranslate="global.menu.account.logout">Sign out</span>
        </button>
        <button *ngSwitchCase="false" md-menu-item (click)="login()" id="login">
            <md-icon>account_box</md-icon>
            <span jhiTranslate="global.menu.account.login">Sign in</span>
        </button>
        <button *ngSwitchCase="false" md-menu-item routerLink="register">
            <md-icon>fingerprint</md-icon>
            <span jhiTranslate="global.menu.account.register">Register</span>
        </button>
    </md-menu>
</md-toolbar>